{
  "name": "complex_nested_data_test",
  "fiware-service": "test",
  "fiware-servicepath": "/complex",
  "subscriptions": {
    "historic": {
      "description": "Device:HISTORIC:nested:historic",
      "status": "active",
      "subject": {
        "entities": [
          {
            "idPattern": ".*",
            "type": "Device"
          }
        ],
        "condition": {
          "attrs": [
            "TimeInstant"
          ]
        }
      },
      "notification": {
        "kafkaCustom": {
          "url": "kafka://kafka:9092",
          "topic": "raw_historic"
        },
        "attrs": [
          "TimeInstant",
          "configuration",
          "measurements",
          "metadata",
          "tags"
        ]
      }
    },
    "lastdata": {
      "description": "Device:LASTDATA:nested:lastdata",
      "status": "active",
      "subject": {
        "entities": [
          {
            "idPattern": ".*",
            "type": "Device"
          }
        ],
        "condition": {
          "attrs": [
            "TimeInstant"
          ]
        }
      },
      "notification": {
        "kafkaCustom": {
          "url": "kafka://kafka:9092",
          "topic": "raw_lastdata"
        },
        "attrs": [
          "TimeInstant",
          "configuration",
          "measurements",
          "metadata",
          "tags"
        ]
      }
    },
    "mutable": {
      "description": "Device:MUTABLE:nested:mutable",
      "status": "active",
      "subject": {
        "entities": [
          {
            "idPattern": ".*",
            "type": "Device"
          }
        ],
        "condition": {
          "attrs": [
            "TimeInstant"
          ]
        }
      },
      "notification": {
        "kafkaCustom": {
          "url": "kafka://kafka:9092",
          "topic": "raw_mutable"
        },
        "attrs": [
          "TimeInstant",
          "configuration",
          "measurements",
          "metadata",
          "tags"
        ]
      }
    }
  },
  "updateEntities": [
    {
      "id": "Device001",
      "type": "Device",
      "TimeInstant": {
        "type": "DateTime",
        "value": "2025-06-26T14:15:00Z"
      },
      "configuration": {
        "type": "StructuredValue",
        "value": {
          "sensors": [
            {"type": "temperature", "interval": 300, "precision": 0.1},
            {"type": "humidity", "interval": 600, "precision": 1.0}
          ],
          "network": {
            "protocol": "LoRaWAN",
            "frequency": 868.1,
            "power": 14
          },
          "enabled": true
        }
      },
      "measurements": {
        "type": "StructuredValue",
        "value": {
          "temperature": 25.3,
          "humidity": 62.8,
          "battery": 87,
          "signal_strength": -85
        }
      },
      "metadata": {
        "type": "StructuredValue", 
        "value": {
          "location": {
            "latitude": 40.4168,
            "longitude": -3.7038,
            "altitude": 650
          },
          "installation_date": "2025-01-15",
          "firmware_version": "1.2.3"
        }
      },
      "tags": {
        "type": "StructuredValue",
        "value": ["outdoor", "temperature", "humidity", "lora"]
      }
    },
    {
      "id": "Device001",
      "type": "Device",
      "TimeInstant": {
        "type": "DateTime",
        "value": "2025-06-26T14:20:00Z"
      },
      "configuration": {
        "type": "StructuredValue",
        "value": {
          "sensors": [
            {"type": "temperature", "interval": 300, "precision": 0.1},
            {"type": "humidity", "interval": 600, "precision": 1.0}
          ],
          "network": {
            "protocol": "LoRaWAN",
            "frequency": 868.1,
            "power": 14
          },
          "enabled": true
        }
      },
      "measurements": {
        "type": "StructuredValue",
        "value": {
          "temperature": 25.8,
          "humidity": 61.2,
          "battery": 86,
          "signal_strength": -82
        }
      },
      "metadata": {
        "type": "StructuredValue",
        "value": {
          "location": {
            "latitude": 40.4168,
            "longitude": -3.7038,
            "altitude": 650
          },
          "installation_date": "2025-01-15",
          "firmware_version": "1.2.3"
        }
      },
      "tags": {
        "type": "StructuredValue",
        "value": ["outdoor", "temperature", "humidity", "lora"]
      }
    }
  ]
}