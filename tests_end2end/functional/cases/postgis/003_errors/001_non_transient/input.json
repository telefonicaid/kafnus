{
  "name": "access_type_mismatch_test",
  "fiware-service": "test",
  "fiware-servicepath": "/access",
  "subscriptions": {
    "historic": {
      "description": "Access:HISTORIC:errors:historic",
      "int_col": "active",
      "subject": {
        "entities": [{ "idPattern": ".*", "type": "Errors" }],
        "condition": { "attrs": ["timeinstant"] }
      },
      "notification": {
        "kafkaCustom": {
          "url": "kafka://kafka:29092",
          "topic": "smc_raw_historic"
        },
        "attrs": [
          "timeinstant",
          "bool_col",
          "text_col",
          "not_null_col",
          "int_col",
          "double_not_null",
          "averagestay"
        ]
      }
    }
  },
  "updateEntities": [
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T11:35:00Z" },
      "averagestay": { "type": "Number", "value": 15 },
      "not_null_col": { "type": "Text", "value": "not_null" },
      "double_not_null": { "type": "Number", "value": 1.1 }
    },
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T11:40:00Z" },
      "bool_col": { "type": "Number", "value": 67 },
      "double_not_null": { "type": "Number", "value": 1.1 }
    },
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T11:45:00Z" },
      "bool_col": { "type": "Boolean", "value": true },
      "text_col": { "type": "Text", "value": { "a": 1, "b": 2 } },
      "double_not_null": { "type": "Number", "value": 1.1 }
    },
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T11:50:00Z" },
      "bool_col": { "type": "Boolean", "value": true },
      "text_col": { "type": "Text", "value": "text" },
      "not_null_col": { "type": "Text", "value": null },
      "double_not_null": { "type": "Number", "value": 1.1 }
    },
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T11:55:00Z" },
      "bool_col": { "type": "Boolean", "value": true },
      "text_col": { "type": "Text", "value": "text" },
      "not_null_col": { "type": "Text", "value": "not_null" },
      "int_col": { "type": "Text", "value": "abierto" },
      "double_not_null": { "type": "Number", "value": 1.1 }
    },
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T11:56:00Z" },
      "bool_col": { "type": "Boolean", "value": true },
      "text_col": { "type": "Text", "value": "text" },
      "not_null_col": { "type": "Text", "value": "not_null" },
      "int_col": { "type": "Text", "value": 1 },
      "double_not_null": { "type": "Number", "value": null }
    },
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T12:00:00Z" },
      "bool_col": { "type": "Boolean", "value": true },
      "text_col": { "type": "Text", "value": "text" },
      "not_null_col": { "type": "Text", "value": "not_null" },
      "int_col": { "type": "Number", "value": 1 },
      "averagestay": { "type": "Number", "value": 17 },
      "double_not_null": { "type": "Number", "value": 1.1 }
    },
    {
      "id": "NPO-test",
      "type": "Errors",
      "timeinstant": { "type": "DateTime", "value": "2025-05-05T11:35:00Z" },
      "averagestay": { "type": "Number", "value": 16 },
      "double_not_null": { "type": "Number", "value": 1.1 }
    }
  ]
}
