{
  "name": "multi_entity_batch_test",
  "fiware-service": "test",
  "fiware-servicepath": "/multientity",
  "subscriptions": {
    "historic": {
      "description": "MultiEntity:HISTORIC:batch:historic",
      "status": "active",
      "subject": {
        "entities": [
          {
            "idPattern": ".*",
            "type": "Sensor"
          },
          {
            "idPattern": ".*", 
            "type": "StreetLight"
          }
        ],
        "condition": {
          "attrs": [
            "TimeInstant"
          ]
        }
      },
      "notification": {
        "kafkaCustom": {
          "url": "kafka://kafka:9092",
          "topic": "raw_historic"
        },
        "attrs": [
          "TimeInstant",
          "temperature",
          "humidity",
          "luminosity",
          "status"
        ]
      }
    },
    "lastdata": {
      "description": "MultiEntity:LASTDATA:batch:lastdata",
      "status": "active",
      "subject": {
        "entities": [
          {
            "idPattern": ".*",
            "type": "Sensor"
          },
          {
            "idPattern": ".*",
            "type": "StreetLight"
          }
        ],
        "condition": {
          "attrs": [
            "TimeInstant"
          ]
        }
      },
      "notification": {
        "kafkaCustom": {
          "url": "kafka://kafka:9092",
          "topic": "raw_lastdata"
        },
        "attrs": [
          "TimeInstant",
          "temperature",
          "humidity",
          "luminosity",
          "status"
        ]
      }
    },
    "mutable": {
      "description": "MultiEntity:MUTABLE:batch:mutable",
      "status": "active",
      "subject": {
        "entities": [
          {
            "idPattern": ".*",
            "type": "Sensor"
          },
          {
            "idPattern": ".*",
            "type": "StreetLight"
          }
        ],
        "condition": {
          "attrs": [
            "TimeInstant"
          ]
        }
      },
      "notification": {
        "kafkaCustom": {
          "url": "kafka://kafka:9092",
          "topic": "raw_mutable"
        },
        "attrs": [
          "TimeInstant",
          "temperature",
          "humidity",
          "luminosity",
          "status"
        ]
      }
    }
  },
  "updateEntities": [
    {
      "id": "TempSensor001",
      "type": "Sensor",
      "TimeInstant": {
        "type": "DateTime",
        "value": "2025-06-26T10:30:00Z"
      },
      "temperature": {"value": 22.5, "type": "Float"},
      "humidity": {"value": 65.2, "type": "Float"}
    },
    {
      "id": "TempSensor002", 
      "type": "Sensor",
      "TimeInstant": {
        "type": "DateTime",
        "value": "2025-06-26T10:30:00Z"
      },
      "temperature": {"value": 24.1, "type": "Float"},
      "humidity": {"value": 58.7, "type": "Float"}
    },
    {
      "id": "StreetLight001",
      "type": "StreetLight",
      "TimeInstant": {
        "type": "DateTime", 
        "value": "2025-06-26T10:30:00Z"
      },
      "luminosity": {"value": 850, "type": "Integer"},
      "status": {"value": "ON", "type": "Text"}
    },
    {
      "id": "StreetLight002",
      "type": "StreetLight", 
      "TimeInstant": {
        "type": "DateTime",
        "value": "2025-06-26T10:30:00Z"
      },
      "luminosity": {"value": 920, "type": "Integer"},
      "status": {"value": "ON", "type": "Text"}
    },
    {
      "id": "TempSensor001",
      "type": "Sensor",
      "TimeInstant": {
        "type": "DateTime",
        "value": "2025-06-26T10:35:00Z"
      },
      "temperature": {"value": 23.1, "type": "Float"},
      "humidity": {"value": 64.8, "type": "Float"}
    },
    {
      "id": "StreetLight001",
      "type": "StreetLight",
      "TimeInstant": {
        "type": "DateTime",
        "value": "2025-06-26T10:35:00Z"
      },
      "luminosity": {"value": 875, "type": "Integer"},
      "status": {"value": "ON", "type": "Text"}
    }
  ]
}